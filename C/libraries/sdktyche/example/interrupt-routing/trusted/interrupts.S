.section .text
.global interrupt_vector_stub
.global interrupt_handler_stub

#define Vector(n) \
.global vector_##n;       \
vector_##n:               \
    pushq %rax; \
    pushq %rcx; \
    pushq %rdx; \
    pushq %rbx; \
    pushq %rsp; \
    pushq %rbp; \
    pushq %rsi; \
    pushq %rdi; \
    pushq %r8; \
    pushq %r9; \
    pushq %r10; \
    pushq %r11; \
    pushq %r12; \
    pushq %r13; \
    pushq %r14; \
    pushq %r15; \
    movq $n, %rdi; \
    movq $10, %rax; \
    vmcall; \
    popq %r15; \
    popq %r14; \
    popq %r13; \
    popq %r12; \
    popq %r11; \
    popq %r10; \
    popq %r9; \
    popq %r8; \
    popq %rdi; \
    popq %rsi; \
    popq %rbp; \
    popq %rsp; \
    popq %rbx; \
    popq %rdx; \
    popq %rcx; \
    popq %rax; \
    iretq

Vector(0)
Vector(1)
Vector(2)
Vector(3)
Vector(4)
Vector(5)
Vector(6)
Vector(7)
Vector(8)
Vector(9)
Vector(10)
Vector(11)
Vector(12)
Vector(13)
Vector(14)
Vector(15)
Vector(16)
Vector(17)
Vector(18)
Vector(19)
Vector(20)
Vector(21)
Vector(22)
Vector(23)
Vector(24)
Vector(25)
Vector(26)
Vector(27)
Vector(28)
Vector(29)
Vector(30)
Vector(31)
Vector(32)
Vector(33)
Vector(34)
Vector(35)
Vector(36)
Vector(37)
Vector(38)
Vector(39)
Vector(40)
Vector(41)
Vector(42)
Vector(43)
Vector(44)
Vector(45)
Vector(46)
Vector(47)
Vector(48)
Vector(49)
Vector(50)
Vector(51)
Vector(52)
Vector(53)
Vector(54)
Vector(55)
Vector(56)
Vector(57)
Vector(58)
Vector(59)
Vector(60)
Vector(61)
Vector(62)
Vector(63)
Vector(64)
Vector(65)
Vector(66)
Vector(67)
Vector(68)
Vector(69)
Vector(70)
Vector(71)
Vector(72)
Vector(73)
Vector(74)
Vector(75)
Vector(76)
Vector(77)
Vector(78)
Vector(79)
Vector(80)
Vector(81)
Vector(82)
Vector(83)
Vector(84)
Vector(85)
Vector(86)
Vector(87)
Vector(88)
Vector(89)
Vector(90)
Vector(91)
Vector(92)
Vector(93)
Vector(94)
Vector(95)
Vector(96)
Vector(97)
Vector(98)
Vector(99)
Vector(100)
Vector(101)
Vector(102)
Vector(103)
Vector(104)
Vector(105)
Vector(106)
Vector(107)
Vector(108)
Vector(109)
Vector(110)
Vector(111)
Vector(112)
Vector(113)
Vector(114)
Vector(115)
Vector(116)
Vector(117)
Vector(118)
Vector(119)
Vector(120)
Vector(121)
Vector(122)
Vector(123)
Vector(124)
Vector(125)
Vector(126)
Vector(127)
Vector(128)
Vector(129)
Vector(130)
Vector(131)
Vector(132)
Vector(133)
Vector(134)
Vector(135)
Vector(136)
Vector(137)
Vector(138)
Vector(139)
Vector(140)
Vector(141)
Vector(142)
Vector(143)
Vector(144)
Vector(145)
Vector(146)
Vector(147)
Vector(148)
Vector(149)
Vector(150)
Vector(151)
Vector(152)
Vector(153)
Vector(154)
Vector(155)
Vector(156)
Vector(157)
Vector(158)
Vector(159)
Vector(160)
Vector(161)
Vector(162)
Vector(163)
Vector(164)
Vector(165)
Vector(166)
Vector(167)
Vector(168)
Vector(169)
Vector(170)
Vector(171)
Vector(172)
Vector(173)
Vector(174)
Vector(175)
Vector(176)
Vector(177)
Vector(178)
Vector(179)
Vector(180)
Vector(181)
Vector(182)
Vector(183)
Vector(184)
Vector(185)
Vector(186)
Vector(187)
Vector(188)
Vector(189)
Vector(190)
Vector(191)
Vector(192)
Vector(193)
Vector(194)
Vector(195)
Vector(196)
Vector(197)
Vector(198)
Vector(199)
Vector(200)
Vector(201)
Vector(202)
Vector(203)
Vector(204)
Vector(205)
Vector(206)
Vector(207)
Vector(208)
Vector(209)
Vector(210)
Vector(211)
Vector(212)
Vector(213)
Vector(214)
Vector(215)
Vector(216)
Vector(217)
Vector(218)
Vector(219)
Vector(220)
Vector(221)
Vector(222)
Vector(223)
Vector(224)
Vector(225)
Vector(226)
Vector(227)
Vector(228)
Vector(229)
Vector(230)
Vector(231)
Vector(232)
Vector(233)
Vector(234)
Vector(235)
Vector(236)
Vector(237)
Vector(238)
Vector(239)
Vector(240)
Vector(241)
Vector(242)
Vector(243)
Vector(244)
Vector(245)
Vector(246)
Vector(247)
Vector(248)
Vector(249)
Vector(250)
Vector(251)
Vector(252)
Vector(253)
Vector(254)
Vector(255)

#undef VECTOR
